# 医療機器データベース

## プロジェクト概要
- **名前**: 医療機器データベース（Medical Device Database）
- **目標**: 医療機関における医療機器の情報管理とトラッキングシステム
- **主な機能**: 
  - 医療機器の基本情報管理
  - 消耗品価格表の管理
  - 機器画像の保存・表示
  - 機器ごとの個別URL対応

## URLs
- **開発環境**: https://3000-ih89to7l37nigqdbgxf9a-6532622b.e2b.dev
- **API エンドポイント**: 
  - 機器一覧: `/api/devices`
  - 機器詳細: `/api/devices/{id}`
  - 消耗品管理: `/api/devices/{id}/consumables`
  - 画像管理: `/api/devices/{id}/images`

## データアーキテクチャ
- **データモデル**:
  - 医療機器 (`medical_devices`): 機器名、型番、管理番号、業者情報等
  - 消耗品 (`consumables`): 消耗品名、価格、単位、業者情報等
  - 機器画像 (`device_images`): 画像URL、種類、キャプション等
- **ストレージサービス**: 
  - **Cloudflare D1**: SQLiteベースの関係データベース（機器・消耗品情報）
  - **Cloudflare R2**: S3互換オブジェクトストレージ（画像ファイル）
- **データフロー**: フロントエンド → Hono API → D1/R2 → レスポンス

## 機能一覧

### 現在実装済みの機能 ✅
1. **機器管理**
   - 機器一覧表示 (`/`)
   - 機器詳細表示 (`/device/{id}`)
   - 機器新規追加 (`/add`)
   - 機器情報編集 (`/edit/{id}`)

2. **消耗品管理**
   - 消耗品価格表表示
   - 消耗品の追加・削除
   - 価格情報の管理

3. **画像管理**
   - 機器画像のアップロード（R2ストレージ）
   - 画像表示（複数画像対応）
   - 画像削除機能
   - 画像タイプ分類（メイン、取扱説明書、部品等）

4. **API エンドポイント**
   - RESTful API設計
   - CRUD操作完全対応
   - エラーハンドリング

5. **管理項目**
   - 機器名、型番、管理番号
   - 取引業者名、緊急時電話番号
   - 購入年月日、機器説明
   - 消耗品名、価格、単位、業者名
   - 機器画像（複数対応）

### 未実装の機能 ⏳
1. **認証・アクセス制御**: ユーザーログイン機能
2. **データエクスポート**: CSV/Excel形式でのデータ出力
3. **検索・フィルタリング**: 機器名・業者名での検索機能
4. **メンテナンス記録**: 定期点検・修理履歴の管理
5. **アラート機能**: 保守期限の通知機能

## ユーザーガイド

### 基本的な使い方
1. **機器の確認**: トップページで登録済み機器一覧を確認
2. **詳細表示**: 機器名をクリックして詳細情報と消耗品価格表を表示
3. **新規登録**: 「機器追加」ボタンから新しい医療機器を登録
4. **情報更新**: 詳細ページの「編集」ボタンから機器情報を更新
5. **消耗品管理**: 詳細ページで消耗品の追加・削除が可能
6. **画像管理**: 詳細ページで機器画像のアップロード・削除が可能

### 機器ごとの個別URL
- 各機器は `/device/{id}` の形式で個別URLを持ちます
- 例: `/device/1` で管理番号MD-001の心電図モニターの詳細を表示

## 推奨される次のステップ
1. **認証機能の追加**: ユーザー管理とアクセス制御の実装
2. **検索機能の強化**: 高度な検索・フィルタリング機能
3. **データバックアップ**: 定期的な自動バックアップ機能
4. **モバイル対応の強化**: レスポンシブデザインの改善
5. **Cloudflare Pages本番デプロイ**: プロダクション環境への配置

## デプロイ
- **プラットフォーム**: Cloudflare Pages + Workers
- **ステータス**: ✅ 開発環境で稼働中
- **技術スタック**: Hono + TypeScript + TailwindCSS + Cloudflare D1 + R2
- **最終更新**: 2025-09-25

## 開発情報
- **フレームワーク**: Hono v4.x（軽量Web framework）
- **データベース**: Cloudflare D1（SQLite）
- **ストレージ**: Cloudflare R2（画像ファイル）
- **フロントエンド**: バニラJavaScript + TailwindCSS
- **デプロイ**: Cloudflare Pages対応

## 注意事項
- 現在は開発環境のみで稼働
- Cloudflare API keyが設定されていないため、本番環境へのデプロイには追加設定が必要
- 画像ファイルは適切なサイズに最適化することを推奨